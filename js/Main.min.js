function tConvert(t){return t=t.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[t],t.length>1&&(t=t.slice(1),t[5]=+t[0]<12?"AM":"PM",t[0]=+t[0]%12||12),t.join("")}function add_class_option(){var t=$(".add-class-option").length.toString();$("#add-class-form").append("<div id='option"+t+"' class='add-class-option'>Registration Number: <input type='text' id='reg-num"+t+"'><button id='remove-option0' onclick='javascript:remove_option("+t+");' style='float:right;'><i class='fa fa-minus' aria-hidden='true'></i></button><div id='days-of-week'><div class='title'>What days?</div><div class='weekDays-selector'><input type='checkbox' id='weekday-sun"+t+"' class='weekday' /><label for='weekday-sun"+t+"'>S</label><input type='checkbox' id='weekday-mon"+t+"' class='weekday' /><label for='weekday-mon"+t+"'>M</label><input type='checkbox' id='weekday-tue"+t+"' class='weekday' /><label for='weekday-tue"+t+"'>T</label><input type='checkbox' id='weekday-wed"+t+"' class='weekday' /><label for='weekday-wed"+t+"'>W</label><input type='checkbox' id='weekday-thu"+t+"' class='weekday' /><label for='weekday-thu"+t+"'>R</label><input type='checkbox' id='weekday-fri"+t+"' class='weekday' /><label for='weekday-fri"+t+"'>F</label><input type='checkbox' id='weekday-sat"+t+"' class='weekday' /><label for='weekday-sat"+t+"'>S</label></div></div>Start time: <input type='time' id='start-time"+t+"'> End time: <input type='time' id='end-time"+t+"'><br></div>")}function remove_option(t){for(var e=$(".add-class-option").length,i=t;e>i;i++)$("#reg-num"+i).val($("#reg-num"+(i+1)).val()),$("#weekday-sun"+i).prop("checked",$("#weekday-sun"+(i+1)).prop("checked")),$("#weekday-mon"+i).prop("checked",$("#weekday-mon"+(i+1)).prop("checked")),$("#weekday-tue"+i).prop("checked",$("#weekday-tue"+(i+1)).prop("checked")),$("#weekday-wed"+i).prop("checked",$("#weekday-wed"+(i+1)).prop("checked")),$("#weekday-thu"+i).prop("checked",$("#weekday-thu"+(i+1)).prop("checked")),$("#weekday-fri"+i).prop("checked",$("#weekday-fri"+(i+1)).prop("checked")),$("#weekday-sat"+i).prop("checked",$("#weekday-sat"+(i+1)).prop("checked")),$("#start-time"+i).val($("#start-time"+(i+1)).val()),$("#end-time"+i).val($("#end-time"+(i+1)).val());$($(".add-class-option")[e-1]).remove()}function add_class(){for(var t=$("#add-class-name").val(),e=[],i=[],n=[],s=0;s<$(".add-class-option").length;s++){e[s]=$("#reg-num"+s).val(),i[s]=[$("#weekday-sun"+s).prop("checked"),$("#weekday-mon"+s).prop("checked"),$("#weekday-tue"+s).prop("checked"),$("#weekday-wed"+s).prop("checked"),$("#weekday-thu"+s).prop("checked"),$("#weekday-fri"+s).prop("checked"),$("#weekday-sat"+s).prop("checked")],n[s]=[$("#start-time"+s).val(),$("#end-time"+s).val()];var r=!1;n[s][0].substr(0,2)<start_hour_marks&&(start_hour_marks=parseInt(n[s][0].substr(0,2)),r=!0),n[s][1].substr(0,2)>=end_hour_marks&&(end_hour_marks=parseInt(n[s][1].substr(0,2)),r=!0)}if(validate_data(t,e,i,n)){classes[classes.length]=new Class(t,e,n,i);for(var s=$(".add-class-option").length-1;s>0;s--)$($(".add-class-option"))[s].remove();$("#add-class-form")[0].reset(),$(".modal").css("display","none"),reset_class_list(),r&&generate_hourmarks(start_hour_marks,end_hour_marks+1)}generate_hourmarks(start_hour_marks,end_hour_marks)}function edit_class(t){$(".modal").css("display","block");for(var e=0;e<classes[t].crns.length-1;e++)add_class_option();$("#add-class-name").val(classes[t].name);for(var e=0;e<classes[t].crns.length;e++)$("#reg-num"+e).val(classes[t].crns[e]),$("#weekday-sun"+e).prop("checked",classes[t].days[e][0]),$("#weekday-mon"+e).prop("checked",classes[t].days[e][1]),$("#weekday-tue"+e).prop("checked",classes[t].days[e][2]),$("#weekday-wed"+e).prop("checked",classes[t].days[e][3]),$("#weekday-thu"+e).prop("checked",classes[t].days[e][4]),$("#weekday-fri"+e).prop("checked",classes[t].days[e][5]),$("#weekday-sat"+e).prop("checked",classes[t].days[e][6]),$("#start-time"+e).val(classes[t].times[e][0]),$("#end-time"+e).val(classes[t].times[e][1]);classes.splice(t,1)}function cancel_class_edit(){$(".modal").css("display","none");for(var t=$(".add-class-option").length-1;t>0;t--)$($(".add-class-option"))[t].remove();$("#add-class-form")[0].reset(),generate_hourmarks(start_hour_marks,end_hour_marks)}function open_add_class(){$(".modal").css("display","block")}function validate_data(t,e,i,n){if(""==t||null==t||void 0==t)return alert("Your class needs a name!"),!1;for(var s=0;s<e.length;s++){for(var r=s+1;r<e.length;r++)if(e[s]==e[r])return alert("Option #"+(s+1)+" and option #"+(r+1)+" have the same registration number!"),!1;if(""==e[s]||null==e[s]||void 0==e[s])return alert("Option #"+(s+1)+" is missing a class registration number!"),!1;if(i[s]==[0,0,0,0,0,0,0])return alert("Must select at least one day in option #"+(s+1)),!1;if(parseInt(n[s][0].substr(0,2))>=parseInt(n[s][1].substr(0,2))){if(parseInt(n[s][0].substr(0,2))!=parseInt(n[s][1].substr(0,2)))return alert("Option #"+(s+1)+" ends before it begins!"),!1;if(parseInt(n[s][0].substr(3,5))>=parseInt(n[s][1].substr(3,5)))return alert("Option #"+(s+1)+" ends before it begins!"),!1}}return!0}var twentyfourhour=!1,start_hour_marks=7,end_hour_marks=18,classes=[],generate_hourmarks=function(t,e){for(var i=e-t,n=$(".day").length,s=0;n>s;s++){$($(".day")[s]).find(".hour").remove();for(var r=0;i>r;r++)$($(".day")[s]).append('<div class="hour" id="hourdiv'+(t+r)+'"></div>')}var a=Math.floor(.9*$($(".day")[0]).height()/i);$(".hour").css({height:a.toString(),width:"100%","border-bottom":"1px solid #888"}),$(".hour-marks").empty();for(var s=0;i+1>s;s++){var o=t+s;if(twentyfourhour||(labelnew=o%12,0==labelnew?labelnew=t+s:labelnew=labelnew,24==labelnew||0==labelnew?labelnew=12:labelnew=labelnew,o=12>o||24==o?labelnew.toString()+"am":labelnew.toString()+"pm"),o=o.toString(),$(".hour-marks").append('<div class="hour-mark" id="hm'+s+'">'+o+"</div>"),s!=i){var h=$($(".hour")[s]).position().top-10;$("#hm"+s).css({position:"absolute",top:h.toString(),left:$(".hour-marks").position().left.toString()})}else{var h=$($(".hour")[s-1]).position().top+$($(".hour")[s]).height()-10;$("#hm"+s).css({position:"absolute",top:h.toString(),left:$(".hour-marks").position().left.toString()})}}$(".hour-mark").css({width:$($(".hourmarks")[0]).width(),"text-align":"right"})},reset_class_list=function(){for(var t=[],e=0;e<classes.length;e++)t[e]=$("input[type=radio][name=classlist"+classes[e].id+"]").index($("input[type=radio][name=classlist"+classes[e].id+"]:checked")),-1==t[e]&&"none"==t[e];$("#classes-list").empty();for(var e=0;e<classes.length;e++)classes[e].add_to_list($("#classes-list"),twentyfourhour,t[e])};$(window).resize(function(){for(var t=0;t<classes.length;t++)classes[t].add_to_calendar();generate_hourmarks(start_hour_marks,end_hour_marks)}),$(window).on("load",function(){reset_class_list(),generate_hourmarks(start_hour_marks,end_hour_marks)});