function tConvert(e){return e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e],e.length>1&&(e=e.slice(1),e[5]=+e[0]<12?"AM":"PM",e[0]=+e[0]%12||12),e.join("")}function add_class_option(){var e=$(".add-class-option").length.toString();$("#add-class-form").append("<div id='option"+e+"' class='add-class-option'>Registration Number: <input type='text' id='reg-num"+e+"'><button id='remove-option0' onclick='javascript:remove_option("+e+");' style='float:right;'><i class='fa fa-minus' aria-hidden='true'></i></button><div id='days-of-week'><div class='title'>What days?</div><div class='weekDays-selector'><input type='checkbox' id='weekday-sun"+e+"' class='weekday' /><label for='weekday-sun"+e+"'>S</label><input type='checkbox' id='weekday-mon"+e+"' class='weekday' /><label for='weekday-mon"+e+"'>M</label><input type='checkbox' id='weekday-tue"+e+"' class='weekday' /><label for='weekday-tue"+e+"'>T</label><input type='checkbox' id='weekday-wed"+e+"' class='weekday' /><label for='weekday-wed"+e+"'>W</label><input type='checkbox' id='weekday-thu"+e+"' class='weekday' /><label for='weekday-thu"+e+"'>R</label><input type='checkbox' id='weekday-fri"+e+"' class='weekday' /><label for='weekday-fri"+e+"'>F</label><input type='checkbox' id='weekday-sat"+e+"' class='weekday' /><label for='weekday-sat"+e+"'>S</label></div></div>Start time: <input type='time' id='start-time"+e+"'> End time: <input type='time' id='end-time"+e+"'><br></div>")}function remove_option(e){for(var t=$(".add-class-option").length,n=e;t>n;n++)$("#reg-num"+n).val($("#reg-num"+(n+1)).val()),$("#weekday-sun"+n).prop("checked",$("#weekday-sun"+(n+1)).prop("checked")),$("#weekday-mon"+n).prop("checked",$("#weekday-mon"+(n+1)).prop("checked")),$("#weekday-tue"+n).prop("checked",$("#weekday-tue"+(n+1)).prop("checked")),$("#weekday-wed"+n).prop("checked",$("#weekday-wed"+(n+1)).prop("checked")),$("#weekday-thu"+n).prop("checked",$("#weekday-thu"+(n+1)).prop("checked")),$("#weekday-fri"+n).prop("checked",$("#weekday-fri"+(n+1)).prop("checked")),$("#weekday-sat"+n).prop("checked",$("#weekday-sat"+(n+1)).prop("checked")),$("#start-time"+n).val($("#start-time"+(n+1)).val()),$("#end-time"+n).val($("#end-time"+(n+1)).val());$($(".add-class-option")[t-1]).remove()}function add_class(){generate_hourmarks(start_hour_marks,end_hour_marks);for(var e=$("#add-class-name").val(),t="#"+$("#add-class-color").val().slice(-6),n=[],r=[],i=[],s=0;s<$(".add-class-option").length;s++)n[s]=$("#reg-num"+s).val(),r[s]=[$("#weekday-sun"+s).prop("checked"),$("#weekday-mon"+s).prop("checked"),$("#weekday-tue"+s).prop("checked"),$("#weekday-wed"+s).prop("checked"),$("#weekday-thu"+s).prop("checked"),$("#weekday-fri"+s).prop("checked"),$("#weekday-sat"+s).prop("checked")],i[s]=[$("#start-time"+s).val(),$("#end-time"+s).val()];if(validate_data(e,t,n,r,i)){classes[classes.length]=new Class(e,n,i,r,t);for(var s=$(".add-class-option").length-1;s>0;s--)$($(".add-class-option"))[s].remove();$("#add-class-form")[0].reset(),$(".modal").css("display","none"),reset_class_list();for(var s=0;s<i.length;s++)start_hour_marks=Math.min(start_hour_marks,parseInt(i[s][0].substr(0,2))),end_hour_marks=Math.max(end_hour_marks,parseInt(i[s][1].substr(0,2))+1);generate_hourmarks(start_hour_marks,end_hour_marks)}}function edit_class(e){$(".modal").css("display","block");for(var t=0;t<classes[e].crns.length-1;t++)add_class_option();$("#add-class-name").val(classes[e].name),$("#add-class-color").val(classes[e].color);for(var t=0;t<classes[e].crns.length;t++)$("#reg-num"+t).val(classes[e].crns[t]),$("#weekday-sun"+t).prop("checked",classes[e].days[t][0]),$("#weekday-mon"+t).prop("checked",classes[e].days[t][1]),$("#weekday-tue"+t).prop("checked",classes[e].days[t][2]),$("#weekday-wed"+t).prop("checked",classes[e].days[t][3]),$("#weekday-thu"+t).prop("checked",classes[e].days[t][4]),$("#weekday-fri"+t).prop("checked",classes[e].days[t][5]),$("#weekday-sat"+t).prop("checked",classes[e].days[t][6]),$("#start-time"+t).val(classes[e].times[t][0]),$("#end-time"+t).val(classes[e].times[t][1]);classes.splice(e,1)}function remove_class(e){classes.splice(e,1),reset_class_list()}function cancel_class_edit(){$(".modal").css("display","none");for(var e=$(".add-class-option").length-1;e>0;e--)$($(".add-class-option"))[e].remove();$("#add-class-form")[0].reset(),generate_hourmarks(start_hour_marks,end_hour_marks)}function open_add_class(){$(".modal").css("display","block")}function validate_data(e,t,n,r,i){if(""==e||null==e||void 0==e)return alert("Your class needs a name!"),!1;if("#FFFFFF"==t){var s=confirm("The color for this class is still plain white. Is this ok?");if(!s)return!1}for(var a=0;a<n.length;a++){for(var o=a+1;o<n.length;o++)if(n[a]==n[o])return alert("Option #"+(a+1)+" and option #"+(o+1)+" have the same registration number!"),!1;if(""==n[a]||null==n[a]||void 0==n[a])return alert("Option #"+(a+1)+" is missing a class registration number!"),!1;if(r[a]==[0,0,0,0,0,0,0])return alert("Must select at least one day in option #"+(a+1)),!1;if(i[a][0]=interpTime(i[a][0]),i[a][1]=interpTime(i[a][1]),0==i[0]||0==i[1])return alert("Option #"+(a+1)+" does not fit any time format must be one of: HH:MM am/pm, HH:MM (24hr), or HHMM (24hr)"),!1;if(parseInt(i[a][0].substr(0,2))>=parseInt(i[a][1].substr(0,2))){if(parseInt(i[a][0].substr(0,2))!=parseInt(i[a][1].substr(0,2)))return alert("Option #"+(a+1)+" ends before it begins!"),!1;if(parseInt(i[a][0].substr(3,5))>=parseInt(i[a][1].substr(3,5)))return alert("Option #"+(a+1)+" ends before it begins!"),!1}}return!0}function interpTime(e){var t=/^(((0?[1-9])|(1[0-2])):([0-5]\d)\s?(A|P|a|p)(M|m))$/,n=/^([0-1]?\d|2[0-3]):?([0-5]\d)$/;if(0==t.test(e)&&0==n.test(e))return!1;if(t.test(e)){var r=/^((0?[1-9])|(1[0-2])):/,i=/(P|p)(M|m)$/.test(e),s=r.exec(e)[1];i&&(s=(parseInt(s)+12).toString());var a=/:([0-5]\d)/,o=a.exec(e)[1],e=s+":"+o;return e}if(n.test(e)){twentyfourhour=!0;var l=/([0-1]?\d|2[0-4])[0-5]\d/;if(l.test(e)){var o=e.substr(e.length-2),s=e.substr(0,e.length-2);/^\d$/.test(s)&&(s="0"+s);var e=s+":"+o;return e}return e=e}}function createString(){for(var e="{",t=0;t<classes.length;t++){e+=classes[t].name+","+classes[t].color+","+classes[t].selected+":";for(var n=0;n<classes[t].crns.length;n++){e+="{"+classes[t].crns[n]+",",e+=classes[t].times[n].join("").replace(/:/g,"")+",";for(var r="",i=0;i<classes[t].days[n].length;i++)r+=classes[t].days[n][i]?"1":"0";e+=parseInt(r,2)+"}!"}e=e.substr(0,e.length-1)+"}||{"}return e=e.substr(0,e.length-3),Base64.encode(e)}function interpString(e){for(var t=Base64.decode(e),n=t.split("||"),r=[],i=0;i<n.length;i++){for(var s=n[i].substr(1,n[i].indexOf(",")-1),a=n[i].substr(n[i].indexOf(",")+1,7),o=n[i].substr(n[i].indexOf(",")+9,n[i].indexOf(":")-n[i].indexOf(",")-9),l=n[i].substr(n[i].indexOf(":")+1).replace(/[{}]/g,"").split("!"),c=[],u=[],d=[],f=0;f<l.length;f++){var p=l[f].split(",");c[f]=p[0],u[f]=[],u[f][0]=p[1].substr(0,2)+":"+p[1].substr(2,2),u[f][1]=p[1].substr(4,2)+":"+p[1].substr(6,2),d[f]=String("0000000"+parseInt(p[2]).toString(2)).slice(-7).split("");for(var h=0;h<d[f].length;h++)d[f][h]=parseInt(d[f][h])}r[i]=new Class(s,c,u,d,a,o)}return r}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function clear_class_list(){if(classes.length>0&&confirm("This will clear all classes from your list. Ok?")){for(var e=0;e<classes.length;e++)$("div.class"+e+"display").remove();classes=[],reset_class_list(),window.history.replaceState(null,null,"?"),generate_hourmarks(start_hour_marks,end_hour_marks)}}var twentyfourhour=!1,start_hour_marks=7,end_hour_marks=18,classes=[],generate_hourmarks=function(e,t){for(var n=t-e,r=$(".day").length,i=0;r>i;i++){$($(".day")[i]).find(".hour").remove();for(var s=0;n>s;s++)$($(".day")[i]).append('<div class="hour" id="hourdiv'+(e+s)+'"></div>')}var a=Math.floor(.9*$($(".day")[0]).height()/n);$(".hour").css({height:a.toString(),width:"100%","border-bottom":"1px solid #888"}),$(".hour-marks").empty();for(var i=0;n+1>i;i++){var o=e+i;if(twentyfourhour||(labelnew=o%12,0==labelnew?labelnew=e+i:labelnew=labelnew,24==labelnew||0==labelnew?labelnew=12:labelnew=labelnew,o=12>o||24==o?labelnew.toString():labelnew.toString()),o=o.toString(),$(".hour-marks").append('<div class="hour-mark" id="hm'+i+'">'+o+"</div>"),i!=n){var l=$($(".hour")[i]).position().top-parseFloat($("#hms").css("font-size"));$("#hm"+i).css({position:"absolute",top:l.toString(),left:$(".hour-marks").position().left.toString()})}else{var l=$($(".hour")[i-1]).position().top+$($(".hour")[i]).height()-parseFloat($("#hms").css("font-size"))/2;$("#hm"+i).css({position:"absolute",top:l.toString(),left:$(".hour-marks").position().left.toString()})}}$(".hour-mark").css({width:$($(".hour-marks")[0]).width(),"text-align":"right"})},reset_class_list=function(){for(var e=[],t=0;t<classes.length;t++)e=classes[t].selected;$("#classes-list").empty();for(var t=0;t<classes.length;t++)classes[t].add_to_list($("#classes-list"),twentyfourhour,e[t]),classes[t].add_to_calendar();classes.length>0?window.history.replaceState(null,null,"?string="+createString()):window.history.replaceState(null,null,"?")};$(window).resize(function(){generate_hourmarks(start_hour_marks,end_hour_marks);for(var e=0;e<classes.length;e++)classes[e].add_to_calendar()}),$(window).on("load",function(){var e=getParameterByName("string");null!=e&&(classes=interpString(e)),generate_hourmarks(start_hour_marks,end_hour_marks),reset_class_list(),generate_hourmarks(start_hour_marks,end_hour_marks);for(var t=0;t<classes.length;t++)classes[t].add_to_calendar();$("#add-class-form").keypress(function(e){return e.which&&13==e.which||e.keyCode&&13==e.keyCode?(event.preventDefault(),add_class(),!1):!0})});