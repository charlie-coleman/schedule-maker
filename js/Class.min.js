function Class(t,e,n,i,r,o,s){this.name=t,this.shortname=e,this.crns=n,this.times=i,this.days=r,this.id=0,this.color=o,this.textcolor=.299*hexToRgb(o).r+.587*hexToRgb(o).g+.114*hexToRgb(o).b>=128?"#000000":"#FFFFFF",this.selected=s;var a=this;this.tConvert=function(t){return t=t.toString().match(/^([01]?\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[t],t.length>1&&(t=t.slice(1),t[5]=+t[0]<12?"am":"pm",t[0]=+t[0]%12||12),t.join("")},this.add_to_calendar=function(){$("div.class"+this.id+"display").remove();var t=["#sunday","#monday","#tuesday","#wednesday","#thursday","#friday","#saturday"],e=$("input:radio[name='classlist"+this.id+"']:checked").val();if("none"!=e&&null!=e){this.selected=this.crns.indexOf(e);for(var n=0;n<this.days[this.selected].length;n++)if(this.days[this.selected][n]){var i=this.times[this.selected][0].indexOf(":"),r=this.times[this.selected][1].indexOf(":"),o=parseInt(this.times[this.selected][0].substr(0,i)),s=parseInt(this.times[this.selected][0].substr(i+1)),a=this.times[this.selected][1].substr(0,r),l=this.times[this.selected][1].substr(r+1),u=parseFloat(s)/60,c=parseFloat(l)/60,d=parseFloat(a)-parseFloat(o)-(u-c);$(t[n]).append("<div class='class"+this.id+"display' id='class"+this.id+"-"+n+"' onclick='javascript:edit_class("+this.id+");'>"+this.shortname+"</div>"),$("#class"+this.id+"-"+n).css({color:this.textcolor,width:$($(".hour")[0]).width(),height:$($(".hour")[0]).height()*d,"border-radius":.01*$($(".hour")[0]).width(),position:"absolute",top:$("#hourdiv"+o).position().top+$($(".hour")[0]).height()*u,left:$(t[n]).position().left,background:this.color})}}classes.length>0?window.history.replaceState(null,null,"?string="+createString()):window.history.replaceState(null,null,"")},this.add_to_list=function(t,e){void 0==s&&(s=this.crns.length),this.id=$(".class").length.toString();for(var i=[],r=[],o=["Su","M","T","W","R","F","Sa"],l=0;l<this.days.length;l++){i[l]="";for(var u=0;7>u;u++)1==this.days[l][u]&&(i[l]=i[l]+o[u])}for(var l=0;l<this.times.length;l++){r[l]="";var c=this.times[l][0],d=this.times[l][1];e?r[l]=c.toString()+"-"+d.toString():(c=this.tConvert(c),d=this.tConvert(d),r[l]=c.toString()+"-"+d.toString())}t.append("<div class='class' id='classlist"+this.id+"'></div>"),$("#classlist"+this.id).append("<div class='name'>"+$("<div/>").text(this.name).html()+"</div>"),$("#classlist"+this.id).append("<button class='removeclass' onclick='javascript:remove_class("+this.id+");'><i class='fa fa-minus' aria-hidden='true'></i></button>"),$("#classlist"+this.id).append("<button class='edit' onclick='javascript:edit_class("+this.id+");'><i class='fa fa-pencil-square-o' aria-hidden='true'></i></button>"),$("#classlist"+this.id).append("<form id='class"+this.id+"form'></form>");for(var u=0;u<n.length;u++)$("#class"+this.id+"form").append("<input type='radio' name='classlist"+this.id+"' value="+$("<div/>").text(this.crns[u]).html()+" class='option'>"),$("#class"+this.id+"form").append("<div class='days'>"+$("<div/>").text(i[u]).html()+"</div>"),$("#class"+this.id+"form").append("<div class='time'>"+$("<div/>").text(r[u]).html()+"</div><br>");$("#class"+this.id+"form").append("<input type='radio' name='classlist"+this.id+"' value='none' class='option'>"),$("#class"+this.id+"form").append("<div class='days'>None</div>"),$("#classlist"+this.id).append("<div class='crn-label'>Selected CRN:&nbsp;</div><div class='crn-label' id='class"+this.id+"crn'>none</div"),$("input[type=radio][name=classlist"+this.id+"]").change(function(){$("#class"+a.id+"crn").text($("input[type=radio][name=classlist"+a.id+"]:checked").val()),a.add_to_calendar()}),$("input[type=radio][name=classlist"+this.id+"][value="+this.crns[this.selected]+"]").prop("checked",!0),$("#class"+a.id+"crn").text($("input[type=radio][name=classlist"+a.id+"]:checked").val()),a.add_to_calendar()},this.convertToICSString=function(t,e){var n=["SU","MO","TU","WE","TH","FR","SA"],i="BEGIN:VEVENT\n";i+="DTSTART:"+t+"T"+this.times[this.selected][0].replace(":","")+"00\n",i+="DTEND:"+t+"T"+this.times[this.selected][1].replace(":","")+"00\n",i+="RRULE:FREQ=WEEKLY;UNTIL="+e+"T125959Z;BYDAY=";for(var r=0;r<this.days[this.selected].length;r++)1==this.days[this.selected][r]&&(i+=n[r]+",");return i=i.substr(0,i.length-1)+"\n",i+="DESCRIPTION:"+this.shortname+"\n",i+="SUMMARY:"+this.name+"\n",i+="END:VEVENT\n"}}